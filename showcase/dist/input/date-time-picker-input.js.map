{"version":3,"sources":["../src/input/date-time-picker-input.ts"],"names":[],"mappings":"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","file":"date-time-picker-input.js","sourcesContent":["import { Button } from \"../button/button\";\r\nimport \"./assets/css/date-time-picker-input.css!\";\r\nimport jquery = require(\"jquery\");\r\nimport * as moment from \"moment\";\r\nimport { AInput } from \"./abstract/a-input\";\r\nimport { InputAddon } from \"./input-addon\";\r\nimport { NumericStepper } from \"./numeric-stepper\";\r\nimport { EMouseEvent, EBasicColorStatus ,EVerticalAlign,EHorizontalAlign } from \"mvcomponents/component\";\r\nimport { EDatePartType, EDatePickerStartType, IConfigDatePicker } from \"./date-picker-input\";\r\n\r\n/**\r\n * Campo de formulário para exibição de data com hora.\r\n * \r\n * <img src=\"../../doc_assets/date-time-picker-input_example.png\">\r\n * \r\n * @example\r\n * let dateTime = new DateTimePickerInput();\r\n * let form = new Form();\r\n * form.append(dateTime);\r\n * \r\n * @export\r\n * @extends {AInput}\r\n * @memberof module:mvcomponents/input\r\n */\r\nexport class DateTimePickerInput extends AInput<Date>{\r\n\tprivate format:string;\r\n\tprivate hourInput:NumericStepper;\r\n\tprivate minuteInput:NumericStepper;\r\n\tprivate selectedDate:Date;\r\n\tconstructor(options:IConfigDatePicker={}){\r\n\t\tsuper(\"text\", \"\");\r\n\t\tlet inputAddonChooseDate = new InputAddon()\r\n\t\t.setIcon(\"glyphicon glyphicon-calendar\");\r\n\t\tthis\r\n\t\t\t.addStyleName(\"ui-date-picker-timer-input\")\r\n\t\t\t.append(inputAddonChooseDate);\r\n\t\tthis.setSize(3);\r\n\r\n\t\tvar config:IConfigDatePicker = <IConfigDatePicker>Object.assign({\r\n\t\t\ttodayBtn: \"linked\",\r\n\t\t\ttodayHighlight: true,\r\n\t\t\tinline: true,\r\n\t\t\tlanguage:\"pt-BR\",\r\n\t\t}, options);\r\n\r\n\t\toptions.format = options.format || \"DD[/]MM[/]YYYY HH:mm\";\r\n\t\t\r\n\t\t//config.format = options.format.replace(/\\[|\\]/g,\"\").toLowerCase();\r\n\t\t\r\n\t\tthis.format = options.format;\r\n\t\tjquery(this.element).append(`\r\n\t\t\t<div class=\"backdrop\"></div>\r\n\t\t\t<div class=\"box-date-picker-input\">\r\n\t\t\t\t<div class=\"container\">\r\n\t\t\t\t\t<div class=\"date-box\"></div>\r\n\t\t\t\t\t<div class=\"inputs-box\"></div>\r\n\t\t\t\t</div>\t\t\t\t\r\n\t\t\t</div>\r\n\t\t`);\r\n\t\tlet dateBox = jquery(this.element)\r\n\t\t\t.find(\".date-box:first\");\r\n\t\tdateBox\r\n\t\t\t.datepicker(config)\r\n\t\t\t.on(\"changeDate\",(evt:{date:Date}) => {\r\n\t\t\t\tthis.selectedDate = evt.date;\r\n\t\t\t});\r\n\r\n\t\tjquery(this.element)\r\n\t\t\t.find(\".backdrop:first\")\r\n\t\t\t.on(\"click\",() => {\r\n\t\t\t\tthis.removeStyleName(\"is-showing\");\r\n\t\t\t});\t\t\t\r\n\r\n\t\tthis.hourInput = new NumericStepper()\r\n\t\t.setMax(23)\r\n\t\t.setSize(4)\r\n\t\t.setMin(0)\r\n\t\t.setLabel(\"Hora\");\r\n\r\n\t\tthis.minuteInput = new NumericStepper()\r\n\t\t.setMax(59)\r\n\t\t.setSize(4)\r\n\t\t.setMin(0)\r\n\t\t.setLabel(\"Minutos\");\r\n\r\n\t\tlet btClose = new Button(\"Ok\");\r\n\t\tbtClose\r\n\t\t\t.setColor(EBasicColorStatus.PRIMARY)\r\n\t\t\t.setHorizontalAlign(EHorizontalAlign.RIGHT)\r\n\t\t\t.setVerticalAlign(EVerticalAlign.BOTTOM);\r\n\r\n\t\tbtClose.addEvent(EMouseEvent.CLICK,() => {\r\n\t\t\tlet hours = Number(this.hourInput.getValue()) || 0;\r\n\t\t\tlet mins = Number(this.minuteInput.getValue()) || 0;\r\n\t\t\tthis.selectedDate = this.selectedDate || new Date();\r\n\t\t\tthis.selectedDate.setHours(hours,mins);\r\n\t\t\tthis.removeStyleName(\"is-showing\");\r\n\t\t\tthis.setValue(this.selectedDate);\r\n\t\t});\r\n\r\n\t\tjquery(this.element)\r\n\t\t\t.find(\".inputs-box:first\")\r\n\t\t\t.append(this.hourInput.element)\r\n\t\t\t.append(this.minuteInput.element)\r\n\t\t\t.append(btClose.element);\r\n\t\t\t\r\n\t\tinputAddonChooseDate.addEvent(EMouseEvent.CLICK,this.showHandler.bind(this));\r\n\t\tjquery(this.element)\r\n\t\t\t.find(\"input:first\")\r\n\t\t\t.on(\"click\",this.showHandler.bind(this));\r\n\t}\r\n\tprivate showHandler(evt:Event){\r\n\t\tif(this.hasStyleName(\"is-showing\")){\r\n\t\t\tthis.removeStyleName(\"is-showing\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet dateBox = jquery(this.element)\r\n\t\t\t.find(\".date-box:first\");\r\n\t\tthis.addStyleName(\"is-showing\");\r\n\t\tlet dtaAtual = this.getValue() || new Date();\r\n\t\tthis.hourInput.setValue(dtaAtual.getHours());\r\n\t\tthis.minuteInput.setValue(dtaAtual.getMinutes());\r\n\t\t(<any>dateBox).datepicker(\"setDates\", new Date(dtaAtual.getFullYear(), dtaAtual.getMonth(), dtaAtual.getDate()));\r\n\t}\r\n\tpublic encode(value: Date): string {\r\n\t\treturn value && moment(value).format(this.format);\r\n\t}\r\n\r\n\tpublic decode(value: string): Date {\r\n\t\treturn value && moment(value, this.format).toDate();\r\n\t}\r\n\r\n\tpublic setMask(mask: string): this {\r\n\t\t//this.getInput().mask(mask);\r\n\t\treturn this;\r\n\t}\r\n}\r\n"]}