{"version":3,"sources":["../src/container/dialog.ts"],"names":[],"mappings":"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","file":"dialog.js","sourcesContent":["import \"./assets/css/dialog.css!\";\r\nimport {AContainer} from \"./abstract/a-container\";\r\nimport {IBlockContainer} from \"./interface/i-block-container\";\r\nimport {IEvent} from \"../component/interface/i-event\";\r\nimport {EventEmitter, IEventEmitterError} from \"../core/event-emitter\";\r\nimport {IRenderable} from \"../core/interface/i-renderable\";\r\nimport {EVerticalAlign} from \"../component/enum/e-vertical-align\";\r\nimport {EHorizontalAlign} from \"../component/enum/e-horizontal-align\";\r\nimport {Box} from \"./box\";\r\nimport {Form} from \"./form\";\r\nimport jquery = require(\"jquery\");\r\n/**\r\n * <img width=\"100%\" src=\"../../doc_assets/alert_window_exemple.png\">\r\n *  \r\n * \r\n * Janela de diálogo que cobre somente uma porção da tela. Pode ser usada para exibir mensagens rápidas e\r\n * também pode abrigar outros componentes. Este componente funciona como um modal, bloqueando as outras partes\r\n * da interface enquanto estiver sendo exibido.\r\n * \r\n * @memberof module:mvcomponents/container\r\n * \r\n * @example\r\n *  var msg:Dialog = new Dialog(\"Cuidado\");\r\n *  msg.show();  \r\n */\r\nexport class Dialog extends AContainer<Box> {\r\n\r\n\t/**\r\n\t * Evento disparado quando a ação de fechar é solicitada. Utilizado no método {@link Dialog.onCloseEvent}\r\n\t * @see {@link EventEmitter}\r\n\t */\r\n\tpublic onClose: EventEmitter<Event> = new EventEmitter<Event>();\r\n\t/**\r\n\t* container inferior do dialog\r\n\t* @see {@link Box}\r\n\t*/\r\n\tpublic footer: Box;\r\n\tprivate destroyOnHide:boolean;\r\n\tprivate isLoaded:boolean;\r\n\tconstructor(title: string = \"\",destroyOnHide?:boolean) {\r\n\t\tsuper(\"div\", `\r\n\t\t\t<div class=\"modal-dialog\">\r\n\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">×</button>\r\n\t\t\t\t\t\t<h4 class=\"modal-title\"></h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t\t\t<div class=\"row modal-body-append\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>`);\r\n\r\n\t\tthis.setTitle(title);\r\n\r\n\t\tthis.footer = new Box()\r\n\t\t\t.addStyleName(\"modal-footer\");\r\n\r\n\t\tvar $element = jquery(this.element);\r\n\r\n\t\t$element\r\n\t\t\t.addClass(\"Dialog modal\");\r\n\r\n\t\t$element.find(\".modal-content\")\r\n\t\t\t.append(this.footer.element);\r\n\r\n\t\t$element.find(\"button.close\")\r\n\t\t\t.on(\"click\", (evt: Event) => this.onCloseEvent(evt));\r\n\r\n\t\tthis.setHorizontalAlign(EHorizontalAlign.CENTER);\r\n\t\tthis.setVerticalAlign(EVerticalAlign.MIDDLE);\r\n\t\tthis.destroyOnHide = destroyOnHide;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * Evento responsável por ocultar o Dialog quando o usuário clica no botão 'x' do componente.\r\n\t * Caso o evento o {@link Dialog.onClose} seja cancelado, a janela não será ocultada.\r\n\t * Obs: O componente não é destruído, apenas tem sua visibilidade alterada para false.\r\n\t * @see {@link Dialog.setVisible}\r\n\t * @see {@link Dialog.onClose}\r\n\t * \r\n\t */\r\n\tprivate onCloseEvent(evt: Event): void {\r\n\t\tthis.onClose.emit(evt).done(() => this.hide());\r\n\t}\r\n\r\n\t//Override\r\n\tprotected insertItem(item: Form<any>, method: string): void {\r\n\t\tjquery(this.element).find(\".modal-body-append:first\")[method](item.element);\r\n\t\tthis.resolveAttachement(item);\r\n\t}\r\n\r\n\t/**\r\n\t * @param title {string}\r\n\t * @return {Dialog}\r\n\t */\r\n\tpublic setTitle(title: string): this {\r\n\t\tjquery(this.element).find(\".modal-title:first\").text(title);\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t* Torna o dialog modal ou não modal de acordo com o parametro passado\r\n\t* @param modal {boolean}\r\n\t* @return {Dialog}\r\n\t*/\r\n\tpublic setModal(modal: boolean): this {\r\n\t\tjquery(this.element)[modal ? \"removeClass\" : \"addClass\"](\"is-not-modal\");\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t* Mostra o Dialog sem a necessidade de está vinculado a um container superior.\r\n\t* @return {Dialog}\r\n\t*/\r\n\tpublic show(): this {\r\n\t\tif(!this.isLoaded){\r\n\t\t\tthis.isLoaded = true;\r\n\t\t\tjquery(\"body\").append(this.element);\r\n\t\t\tthis.attached();\r\n\t\t}\r\n\t\treturn this.setVisible(true);\r\n\t}\r\n\t/**\r\n\t* Esconde o Dialog sem a necessidade de está vinculado a um container superior.\r\n\t* @return {Dialog}\r\n\t*/\r\n\tpublic hide() : this {\r\n\t\tthis.setVisible(false);\r\n\t\tif(this.destroyOnHide){\r\n\t\t\tjquery(`#${this.getUID()}`).detach();\r\n\t\t\t//jquery('body').append(this.element);    \r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t* Configura o alinhamento vertical do Dialog no meio, topo ou fundo da tela.\r\n\t* @param align {EVerticalAlign}\r\n\t* @return {Dialog}\r\n\t*/\r\n\tpublic setVerticalAlign(align: EVerticalAlign): this {\r\n\t\tlet $element = jquery(this.element);\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\tclazz: \"is-middle\",\r\n\t\t\t\tvalue: EVerticalAlign.MIDDLE\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclazz: \"is-top\",\r\n\t\t\t\tvalue: EVerticalAlign.TOP\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclazz: \"is-bottom\",\r\n\t\t\t\tvalue: EVerticalAlign.BOTTOM\r\n\t\t\t}\r\n\t\t].forEach(({clazz, value}) => $element[align === value ? \"addClass\" : \"removeClass\"](clazz));\r\n\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t* Configura o alinhamento horizontal do Dialog no centro, na esquerda ou na direita da tela.\r\n\t* @param align {EHorizontalAlign}\r\n\t* @return {Dialog}\r\n\t*/\r\n\tpublic setHorizontalAlign(align: EHorizontalAlign): this {\r\n\t\tlet $element = jquery(this.element);\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\tclazz: \"is-center\",\r\n\t\t\t\tvalue: EHorizontalAlign.CENTER\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclazz: \"is-left\",\r\n\t\t\t\tvalue: EHorizontalAlign.LEFT\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclazz: \"is-right\",\r\n\t\t\t\tvalue: EHorizontalAlign.RIGHT\r\n\t\t\t}\r\n\t\t].forEach(({clazz, value}) => $element[align === value ? \"addClass\" : \"removeClass\"](clazz));\r\n\r\n\t\treturn this;\r\n\t}\r\n}\r\n"]}