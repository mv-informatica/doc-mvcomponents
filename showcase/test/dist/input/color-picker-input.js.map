{"version":3,"sources":["../src/input/color-picker-input.ts"],"names":[],"mappings":"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","file":"color-picker-input.js","sourcesContent":["import jquery = require(\"jquery\");\r\nimport {TextInput} from \"./text-input\";\r\nimport {InputAddon} from \"./input-addon\";\r\nimport {Validations} from \"./../core/validations\";\r\n\r\nimport \"farbtastic\";\r\n\r\n/**\r\n * @classdesc Componente utilizado para obtenção de cores\r\n * \r\n * <img src=\"../../doc_assets/color_input_exemple.png\">\r\n * \r\n * @example\r\n * \r\n * import {ColorPickerInput} from \"mvcomponents/input\";\r\n * \r\n * let colorPickerInput:ColorPickerInput = new ColorPickerInput();\r\n * colorPickerInput.setValue(\"#ff5e75\");\r\n * \r\n * this.append(colorPickerInput);\r\n * \r\n * @export\r\n * @extends {TextInput}\r\n * @param {string} [p_text=null] Valor da cor selecionada.\r\n * @memberof module:mvcomponents/input\r\n */\r\nexport class ColorPickerInput extends TextInput {\r\n\r\n\tconstructor(p_text: string = \"\") {\r\n\t\tsuper(p_text);\r\n\r\n\t\tthis.setSize(2)\r\n\t\t\t.append(new InputAddon()\r\n\t\t\t\t.setIcon(\"glyphicon glyphicon-tint\"));\r\n\r\n\t\tlet $element = jquery(this.element)\r\n\t\t\t.addClass(\"ColorPickerInput\")\r\n\t\t\t.on(\"change\", () => this.updateColor(this.getValue()))\r\n\t\t\t.append(`\r\n\t\t\t\t<div id=\"uid_${this._uid}_2\" style=\"z-index:9999;top:58px;left:5px;display:none;min-height:170px;overflow:auto\" \r\n\t\t\t\t class=\"select-content dropdown-menu\" role=\"menu\">\r\n\t\t\t\t\t<div class=\"box_colors_colorpicker\"></div><div class=\"box_color_colorpicker\" style=\"height:32px\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t`);\r\n\r\n\t\tlet $input = $element.find(\"input:first\")\r\n\t\t\t.on(\"blur\", (event:Event) => this.onFocusOut(event))\r\n\t\t\t.on(\"focus\", (event:Event) => this.onFocos(event));\r\n\r\n\t\tthis.validator.add(Validations.color());\r\n\t}\r\n\r\n\tprivate onFocusOut(evt: Event): void {\r\n\t\tevt.stopImmediatePropagation();\r\n\t\tthis.showColors(false);\r\n\t}\r\n\r\n\tprivate onFocos(evt: Event): void {\r\n\t\tevt.stopImmediatePropagation();\r\n\t\tthis.showColors(true);\r\n\t}\r\n\r\n\tprivate updateColor(color: string): void {\r\n\t\tjquery(`#uid_${this._uid}`)\r\n\t\t\t.find(\".addon1:first\")\r\n\t\t\t.css({ \"backgroundColor\": color })\r\n\t\t\t.end()\r\n\t\t\t.find(\".box_color_colorpicker:first\")\r\n\t\t\t.css({ \"backgroundColor\": color });\r\n\t}\r\n\r\n\tprivate showColors(show: boolean): void {\r\n\t\tif (show) {\r\n\t\t\tvar defaultcolor: string = this.isValid() ? this.getValue() : \"#000000\";\r\n\t\t\tjquery(`#uid_${this._uid}_2`)\r\n\t\t\t\t.show()\r\n\t\t\t\t.find(\".box_colors_colorpicker:first\")\r\n\t\t\t\t.farbtastic({\r\n\t\t\t\t\twidth: 150,\r\n\t\t\t\t\tcallback: (color: string) => {\r\n\t\t\t\t\t\tthis.updateColor(color);\r\n\t\t\t\t\t\tthis.setValue(color);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tthis.updateColor(defaultcolor);\r\n\t\t\tjquery(this.element).addClass(\"box_visible\");\r\n\t\t} else {\r\n\r\n\t\t\tjquery(`#uid_${this._uid}_2`)\r\n\t\t\t\t.hide();\r\n\t\t\tjquery(this.element).removeClass(\"box_visible\");\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Altera a cor selecionada.\r\n\t * \r\n\t * @example\r\n\t * \r\n\t * let colorPickerInput:ColorPickerInput = new ColorPickerInput();\r\n\t * colorPickerInput.setValue(\"#ff5e75\");\r\n\t * \r\n\t * @param {string} color Texto da cor selecionada. (Ex.: \"red\",\"#ff5e75\",\"#CCC\")\r\n\t * @return {ColorPickerInput}\r\n\t */\r\n\tpublic setValue(color: string): this {\r\n\t\tthis.updateColor(color);\r\n\t\tthis.getInput().val(color);\r\n\t\treturn this;\r\n\t}\r\n}\r\n"]}