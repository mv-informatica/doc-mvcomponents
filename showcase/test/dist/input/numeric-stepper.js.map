{"version":3,"sources":["../src/input/numeric-stepper.ts"],"names":[],"mappings":"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","file":"numeric-stepper.js","sourcesContent":["import \"./assets/css/numeric-stepper.css!\";\r\nimport {AInput} from \"./abstract/a-input\";\r\nimport {EInputEvent} from \"../component/enum/e-input-event\";\r\nimport {EMouseEvent} from \"../component/enum/e-mouse-event\";\r\nimport {InputAddon} from \"./input-addon\";\r\nimport jquery = require(\"jquery\");\r\n\r\n/**\r\n * @classdesc Input personalizado com botões de acréscimo e decréscimo de valor.\r\n *\r\n * <img src=\"../../doc_assets/numeric_steper_input_exemple.png\">\r\n * \r\n * @example \r\n * \r\n * import {NumericStepper} from \"mvcomponents/input\";\r\n * \r\n * let numericStepper:NumericStepper = new NumericStepper()\r\n *     .setPlaceholder(\"Valor minimo 10 e valor máximo 50...\")\r\n *     .setValue(25)\r\n *     .setMin(10)\r\n *     .setMax(50)\r\n *     .setStep(5);\r\n * \r\n * this.append(numericStepper);\r\n *  \r\n * @export\r\n * @extends {AInput}\r\n * @memberof module:mvcomponents/input\r\n */\r\nexport class NumericStepper extends AInput<number>{\r\n\tprivate maxvl:number;\r\n\tprivate minvl:number;\r\n\tprivate stepvl:number;\r\n\tpublic incrementHandler: InputAddon;\r\n\tpublic decrementHandler: InputAddon;\r\n\tconstructor(){\r\n\t\tsuper(\"text\", \"\");\r\n\t\tthis.setMax(9999)\r\n\t\t\t.setMin(0)\r\n\t\t\t.setStep(1)\r\n\t\t\t.addStyleName(\"NumericStepper\");\r\n\r\n\t\tthis.incrementHandler = new InputAddon()\r\n\t\t\t.setIcon(\"glyphicon glyphicon-triangle-top\");\r\n\r\n\t\tthis.decrementHandler = new InputAddon()\r\n\t\t\t.setIcon(\"glyphicon glyphicon-triangle-bottom\");     \r\n\r\n\t\tjquery(this.element).find(\".input-group-btn-vertical:first\")\r\n\t\t\t.append(this.incrementHandler.element)\r\n\t\t\t.append(this.decrementHandler.element);\r\n\r\n\t\tthis.incrementHandler.addEvent(EMouseEvent.CLICK, event => this.increaseValue());\r\n\t\tthis.decrementHandler.addEvent(EMouseEvent.CLICK, event => this.reduceValue());\r\n\t\tthis.addEvent(EInputEvent.CHANGE, () => this.refreshHandlers());\r\n\r\n\t\tthis.incrementHandler.addStyleName(\"btn\").setCssProperties({\"padding\":\"0px\"});\r\n\t\tthis.decrementHandler.addStyleName(\"btn\").setCssProperties({\"padding\":\"0px\"});\r\n\r\n\t}\r\n\r\n\tprotected render(): this {\r\n\t\tjquery(this.element)\r\n\t\t\t.addClass(\"form-group col-xs-12 col-sm-4 col-md-4\")\r\n\t\t\t.append(`\r\n\t\t\t\t<label class=\"control-label\" for=\"inputIcon_${this._uid}\" style=\"display:none\"></label>\r\n\t\t\t\t<div class=\"col-xs-12 input-group input-group-sm\">\r\n\t\t\t\t\t<input class=\"form-control cposi_2 cposis\" id=\"inputIcon_${this._uid}\">\r\n\t\t\t\t\t<div class=\"input-group-btn-vertical\"></div>\r\n\t\t\t\t</div>                \r\n\t\t\t`);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic setValue(value:number):this{\r\n\t\tthis.getInput().val(`${value}`);\r\n\t\tthis.fireEvent(EInputEvent.CHANGE);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprotected encode(value: number): string {\r\n\t\treturn value && value.toString();\r\n\t}\r\n\r\n\tprotected decode(value: string): number {\r\n\t\treturn value && parseFloat(value);\r\n\t}\r\n\r\n\tprivate refreshHandlers() {\r\n\t\tlet value = this.getValue();\r\n\t\tthis.incrementHandler.setDisabled(value >= this.maxvl);\r\n\t\tthis.decrementHandler.setDisabled(value <= this.minvl);\r\n\t}\r\n\t/**\r\n\t * Incrementa o valor atual pelo valor definido no 'step'\r\n\t * \r\n\t * @returns {NumericStepper}\r\n\t */\r\n\tpublic increaseValue():this{\r\n\t\treturn this.setValue(Math.min((this.getValue()||0) + this.stepvl, this.maxvl));\r\n\t}\r\n\r\n\t/**\r\n\t * Reduz o valor atual pelo valor definido no 'step'\r\n\t * \r\n\t * @returns {NumericStepper}\r\n\t */\t\t\r\n\tpublic reduceValue():this{\r\n\t\treturn this.setValue(Math.max((this.getValue()||0) - this.stepvl, this.minvl));\r\n\t}\r\n\t/**\r\n\t * Informa o valor mínimo\r\n\t * \r\n\t * @param {number} min\r\n\t * @returns {NumericStepper}\r\n\t */\r\n\tpublic setMin(min:number):NumericStepper{\r\n\t\tthis.minvl = min;\r\n\t\tthis.getInput().attr(\"min\", min);\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t * Informa o valor máximo\r\n\t * \r\n\t * @param {number} max\r\n\t * @returns {NumericStepper}\r\n\t */\r\n\tpublic setMax(max:number):NumericStepper{\r\n\t\tthis.maxvl = max;\r\n\t\tthis.getInput().attr(\"max\", max);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Informa qual o valor da variação ao pressionar os botões\r\n\t * \r\n\t * @param {number} step\r\n\t * @returns {NumericStepper}\r\n\t */\r\n\tpublic setStep(step:number):NumericStepper{\r\n\t\tthis.stepvl = step;\r\n\t\tthis.getInput().attr(\"step\", step);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Informa qual texto será exibido quando o campo estiver vazio \r\n\t * \r\n\t * @param {string} placeholder\r\n\t * @returns {this}\r\n\t */\r\n\tpublic setPlaceholder(placeholder: string): this {\r\n\t\tthis.getInput().attr(\"placeholder\", placeholder);\r\n\t\treturn this;\r\n\t}\r\n}\r\n"]}