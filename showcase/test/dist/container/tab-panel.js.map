{"version":3,"sources":["../src/container/tab-panel.ts"],"names":[],"mappings":"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","file":"tab-panel.js","sourcesContent":["import {EventEmitter} from \"../core/event-emitter\";\r\nimport jquery = require(\"jquery\");\r\nimport {AContainer} from \"./abstract/a-container\";\r\nimport {IContainer} from \"./interface/i-container\";\r\nimport {ITab} from \"./tab\";\r\nimport {AVisualComponent} from \"./../component/abstract/a-visual-component\";\r\nimport \"./assets/css/tab-panel.css!\";\r\n\r\nexport enum ETabPlacement {\r\n\tTOP, BOTTOM\r\n}\r\n\r\nexport interface ITabPanel extends IContainer<ITab> {\r\n\t/**\r\n\t * Evento que será emitido quando uma nova aba for aberta\r\n\t */\r\n\tonChange: EventEmitter<ITab>;\r\n\t/**\r\n\t * Evento que será emitido quando uma aba for fechada\r\n\t */\r\n\tonClose: EventEmitter<ITab>;\r\n\t/**\r\n\t * Evento que será emitido quando uma nova aba for adicionada\r\n\t */\r\n\tonAdd: EventEmitter<ITab>;\r\n\t/**\r\n\t * Fecha todas as abas\r\n\t */\r\n\tcloseAll(): this;\r\n\t/**\r\n\t * Adiciona uma nova aba ao inicio do painel\r\n\t */\r\n\tprepend(tab: ITab): this;\r\n\t/**\r\n\t * Adiciona uma nova aba no fim do painel\r\n\t */\r\n\tappend(tab: ITab): this;\r\n}\r\n\r\n/**\r\n * <img src=\"../../doc_assets/tab_example_1.png\">\r\n * \r\n * Este container representa um painel com abas. Cada aba é acionada ao clique do seu botão correspondente.\r\n * \r\n * @export\r\n * @memberof module:mvcomponents/container\r\n * \r\n * @example\r\n *\r\n *  let tabpanel = new TabPanel()\r\n *      .setSize(12);\r\n *      .append(new Tab()\r\n *          .setTitle(\"Formulário\")\r\n *          .setContent(boxContainer1))\r\n *      .append(new Tab()\r\n *          .setTitle(\"Tab 2\")\r\n *          .setContent(boxContainer2))\r\n *      .append(new Tab()\r\n *          setTitle(\"Tab 3\")\r\n *          .setContent(boxContainer3))\r\n *\r\n *  let page:ViewPager = new ViewPager()\r\n *      .append(tabpanel)\r\n *      .appendTo(\"body\");\r\n *\r\n * \r\n */\r\nexport class TabPanel extends AContainer<ITab> implements ITabPanel {\r\n\tprivate $items: { [uid: string]: ITab } = {};\r\n\r\n\tpublic onChange: EventEmitter<ITab> = new EventEmitter<ITab>();\r\n\tpublic onClose: EventEmitter<ITab> = new EventEmitter<ITab>();\r\n\tpublic onAdd: EventEmitter<ITab> = new EventEmitter<ITab>();\r\n\r\n\tconstructor() {\r\n\t\tsuper(\"div\");\r\n\t\tthis.render();\r\n\t}\r\n\r\n\tprotected get content() {\r\n\t\treturn jquery(this.element).children(\".tab-content\");\r\n\t}\r\n\r\n\tprotected get nav() {\r\n\t\treturn jquery(this.element).children(\".nav.nav-tabs\");\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tlet element = jquery(this.element);\r\n\t\tlet content = jquery(\"<div class=\\\"tab-content clearfix\\\">\");\r\n\t\tlet nav = jquery(\"<ul class=\\\"nav nav-tabs\\\">\");\r\n\r\n\t\tnav.on(\"click\", \"li:not(.Disabled)\", (event: JQueryEventObject) => this.setActive(this.getTabByElement(jquery(event.currentTarget))));\r\n\r\n\t\telement\r\n\t\t\t.addClass(\"TabPanel\")\r\n\t\t\t.addClass(\"tabbable\")\r\n\t\t\t.append(nav)\r\n\t\t\t.append(content);\r\n\t}\r\n\t/**\r\n\t * Configura o positionamento das abas no inicio do TabPanel ou no fim.\r\n\t * @param {ETabPlacement} placement\r\n\t * @returns {TabPanel}\r\n\t */\r\n\tpublic setPlacement(placement: ETabPlacement): this {\r\n\t\tlet $element = jquery(this.element);\r\n\t\tswitch(placement) {\r\n\t\t\tcase ETabPlacement.BOTTOM:\r\n\t\t\t\tthis.nav.insertAfter(this.content);\r\n\t\t\t\t$element.addClass(\"tabs-below\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase ETabPlacement.TOP:\r\n\t\t\t\tthis.nav.insertBefore(this.content);\r\n\t\t\t\t$element.removeClass(\"tabs-below\");\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t * Dasabilita ou habilita uma aba pelo indice dela.\r\n\t * @param {number} tab indice da aba.\r\n\t * @returns {TabPanel}\r\n\t */\r\n\tpublic setActive(tab: number | ITab): this {\r\n\t\tlet t = typeof tab === \"number\" ? this.getTabByElement(jquery(this.element).find(\"li\").eq(tab)) : tab;\r\n\t\tt.setActive(true);\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t * Fecha todas as abas do TabPanel.\r\n\t * @returns {TabPanel}\r\n\t */\r\n\tpublic closeAll(): this {\r\n\t\tfor ( let i in this.$items ) {\r\n\t\t\tthis.$items[i].close();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate bind(tab: ITab) {\r\n\t\ttab.onActive.subscribe(() => this.onTabActive(tab));\r\n\t\ttab.onClose.subscribe(() => this.onTabClose(tab));\r\n\t}\r\n\r\n\tprivate onTabActive(tab: ITab) {\r\n\t\tlet active = this.getTabByElement(jquery(this.element).find(\"li.active\").not(jquery(tab.element)));\r\n\t\tif (active) {\r\n\t\t\tactive.setActive(false);\r\n\t\t}\r\n\t\tthis.onChange.emit(tab);\r\n\t}\r\n\r\n\tprivate onTabClose(tab: ITab) {\r\n\t\tdelete this.$items[(<AVisualComponent><any>tab).getUID()];\r\n\t\tlet active = this.getTabByElement(this.nav.find(\"li.active\").not(jquery(tab.element)));\r\n\r\n\t\tif (!active && this.nav.find(\"li\").length) {\r\n\t\t\tthis.setActive(0);\r\n\t\t}\r\n\r\n\t\tthis.onClose.emit(tab);\r\n\t}\r\n\r\n\tprivate getTabByElement(element: JQuery): ITab {\r\n\t\treturn this.$items[element.attr(\"id\")];\r\n\t}\r\n\r\n\t//Override\r\n\tprotected insertItem(tab: ITab, method: string): this {\r\n\t\tthis.onAdd\r\n\t\t\t.emit(tab)\r\n\t\t\t.done(() => {\r\n\t\t\t\tlet content = tab.getContent();\r\n\t\t\t\tlet $el: JQuery = jquery(tab.element);\r\n\r\n\t\t\t\tthis.nav.append($el);\r\n\t\t\t\tthis.content[method](jquery(content.element).addClass(\"tab-pane\"));\r\n\t\t\t\tthis.$items[$el.attr(\"id\")] = tab;\r\n\r\n\t\t\t\ttab.setActive(!jquery(this.element).find(\"li.active\").length);\r\n\r\n\t\t\t\tthis.bind(tab);\r\n\t\t\t\tthis.resolveAttachement(<any>tab.getContent());\r\n\t\t\t\tthis.resolveAttachement(<any>tab);\r\n\t\t\t});\r\n\t\treturn this;\r\n\t}\r\n}\r\n"]}