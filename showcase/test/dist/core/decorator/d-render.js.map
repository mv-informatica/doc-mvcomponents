{"version":3,"sources":["../src/core/decorator/d-render.ts"],"names":[],"mappings":"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","file":"d-render.js","sourcesContent":["import jquery = require(\"jquery\");\nimport {SystemApplication} from \"../system-application\";\nimport {ICustomComponent} from \"../interface/i-custom-component\";\nimport {IEvent} from \"../../component/interface/i-event\";\nimport {AVisualComponent} from \"../../component/abstract/a-visual-component\";\nimport _IDOM = require(\"incremental-dom\");\n\ndeclare var System:any;\n\nenum EStatusInstanceClass{\n    CONFIGURED\n    ,FAIL\n    ,STARTED\n}\n\ninterface IEventHandler{\n    type:string;\n    handler:Function;\n}\n\ninterface IWebElementClassBase extends ICustomComponent{\n    prototype?: any;\n    _configWebElement:{\n        selector?: string;\n        templateUrl?: string;\n        loaded?:boolean;\n        status:EStatusInstanceClass;\n    };\n    name: string;\n    new (): Function;\n    _uid: number;\n}\n\nexport interface IWebElementConfig{\n    templateUrl: string;\n}\n\n/** \n * @static Render\n * @memberof module:mvcomponents/core\n */\nexport function Render(p_config:IWebElementConfig): ClassDecorator { \n    return function (p_target: IWebElementClassBase) {\n        var tmpClass:IWebElementClassBase = <IWebElementClassBase>p_target.prototype;\n        tmpClass.refreshRender=function(){\n            var _thistmpele:IWebElementClassBase = (<IWebElementClassBase>this);  \n            if(_thistmpele._configWebElement){\n                if(!_thistmpele._configWebElement.templateUrl){\n                    _thistmpele._configWebElement.status = EStatusInstanceClass.FAIL;\n                    console.error(\"err:please, verify if your web element class has a 'Render' decorator or a templateUrl prorpertie is present!\");\n                }else{  \n                    _thistmpele._configWebElement.status = EStatusInstanceClass.STARTED;      \n                    System.import(SystemApplication.relativePathPackage + _thistmpele._configWebElement.templateUrl).then(function(tmp: ($data: any) => void) {                \n                        if(_thistmpele.element){\n                            _IDOM.patch(_thistmpele.element,tmp[Object.keys(tmp)[0]], _thistmpele);\n                            if(!_thistmpele._configWebElement.loaded){\n                                _thistmpele._configWebElement.loaded=true;\n                                if(_thistmpele.attached){\n                                    _thistmpele.attached();\n                                };\n                            }\n                        }\n                    });\n                }\n            }else{\n                console.warn(\"err:please, verify if your element is trying to use 'refreshRender' method before it is ready in DOM!\");\n            }\n        };  \n\n        tmpClass.setCssProperties = AVisualComponent.prototype.setCssProperties;\n        tmpClass.addStyleName = AVisualComponent.prototype.addStyleName;\n        tmpClass.removeStyleName = AVisualComponent.prototype.removeStyleName;\n        tmpClass.setStyleName = AVisualComponent.prototype.setStyleName;\n        tmpClass.setVisible = AVisualComponent.prototype.setVisible;        \n\n        Object.defineProperty(tmpClass, \"element\", { \n            get: function() {\n                let tmpElement:Element = null;\n                var _this_: IWebElementClassBase = this;\n                if(!_this_._configWebElement) {\n                    _this_._configWebElement = {                        \n                         loaded: false\n                        , templateUrl: p_config.templateUrl\n                        , status: EStatusInstanceClass.CONFIGURED\n                    };\n                };\n                if (!_this_._configWebElement.selector) {\n                    _this_._uid = SystemApplication.getUid();\n                    _this_._configWebElement.selector = \"#uid_\" + _this_._uid;\n                    tmpElement = document.createElement('div');\n                    jquery(tmpElement).addClass(\"col-xs-12\").attr({id:'uid_'+_this_._uid});\n                    _this_.refreshRender();                                     \n                } else if (jquery(_this_._configWebElement.selector).length > 0) {\n                    return jquery(_this_._configWebElement.selector)[0];\n                }\n                return tmpElement; \n            } \n        });               \n    }\n}\n"]}